# Budget1000 — Telegram-бот для учёта семейного бюджета

Телеграм-бот повторяет таблицу из статьи Т—Ж про 1000 дней учёта расходов и добавляет дашборды, отчёты, экспорт/импорт и работу с несколькими участниками семьи.

## Возможности (MVP)
- Ведение трат по типам: повседневные, крупные покупки, квартира.
- Справочники категорий/подкатегорий, импорт из Excel-шаблона `Копия Costs.xlsx`.
- Дашборд со средним расходом, лимитом и статусом “ТРАНЖИРА/В НОРМЕ”.
- Отчёты по периодам, экспорт в XLSX/CSV, импорт из XLSX.
- Ограничение доступа: владелец + белый список пользователей.
- Асинхронный бот на `python-telegram-bot`, хранение в PostgreSQL, миграции Alembic.

## Быстрый старт в Docker
1. Скопируйте `.env.example` в `.env` и заполните переменные (бот токен, DSN БД).
2. Запустите стэк:
   ```bash
   docker-compose up --build
   ```
3. Выполните миграции (в отдельной вкладке):
   ```bash
   docker-compose run --rm bot alembic upgrade head
   ```
4. Откройте Telegram, отправьте `/start` от владельца (OWNER_USERNAME), чтобы активировать бота.

## Локальный запуск (PyCharm/Windows)
1. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
2. Заполните `.env`.
3. Запустите PostgreSQL (можно через Docker Desktop) и примите миграции:
   ```bash
   alembic upgrade head
   ```
4. Запустите бота:
   ```bash
   python -m app.bot
   ```

## Структура проекта
- `app/bot.py` — точка входа бота.
- `app/handlers/` — обработчики команд и меню (кнопки).
- `app/models/` — SQLAlchemy модели.
- `app/services/` — работа с БД, расчёты, отчёты, Excel-экспорт/импорт, графики.
- `app/utils/` — константы и клавиатуры.
- `app/migrations/` + `alembic.ini` — миграции БД.

## Дальнейшая доработка
- Реализовать сценарии добавления трат с пошаговыми клавиатурами.
- Добавить импорт банковских выписок (CSV/XLSX).
- Вынести доступы (OWNER + whitelist) в отдельные middleware.
- Реализовать Telegram Mini App для табличного ввода.
- Добавить напоминания и расширенную совместную работу нескольких пользователей.
